# Incorporating flutter_hooks into Form Builder Example

## Overview

Refactor the Form Builder example to use `flutter_hooks`, replacing `StatefulWidget`/`setState` with hook-based state (`useState`).

---

## Step 1: Add flutter_hooks import

**Command:** Run this in your terminal to add the dependency

```
flutter pub add flutter_hooks
```

```dart
import 'package:flutter_hooks/flutter_hooks.dart';
```

This enables `HookWidget` and `useState`.

---

## Step 2: Convert MyForm to HookWidget

**Location:** Class declarations

```dart
// Before:
class MyForm extends StatefulWidget {
  const MyForm({super.key});

  @override
  State<MyForm> createState() => _MyFormState();
}

class _MyFormState extends State<MyForm> {
  final GlobalKey<FormBuilderState> _formKey = GlobalKey<FormBuilderState>();
  String _firstname = "";
  String _lastname = "";
  ...
}

// After:
class MyForm extends HookWidget {
  MyForm({super.key});
  final GlobalKey<FormBuilderState> _formKey = GlobalKey<FormBuilderState>();

  @override
  Widget build(BuildContext context) {
    final firstname = useState("");
    final lastname = useState("");
    ...
  }
}
```

Key changes:

- Drop the StatefulWidget/\_MyFormState pair.
- Extend `HookWidget` directly.
- Keep the `GlobalKey<FormBuilderState>` as a field on the widget.
- Replace member strings with hook state variables in `build()`.

---

## Step 3: Update state usage to useState

**Location:** Inside `build` where state is read/updated

```dart
// Before (render):
"Fullname: $_firstname $_lastname"

// After:
"Fullname: ${firstname.value} ${lastname.value}"

// Before (onChanged handlers):
onChanged: (value) => setState(() {
  _firstname = value ?? "";
})

// After:
onChanged: (value) => firstname.value = value ?? ""
```

Do the same for `lastname`.

---

## Step 4: Keep FormBuilder widgets but remove setState

**Location:** The two `FormBuilderTextField` widgets

Replace `setState` calls with direct `useState` updates as shown above. Validators stay the same.

---

## Step 5: Adjust Clear button to reset hook state

**Location:** "Clear" button callback

```dart
// Before:
onPressed: () {
  setState(() {
    _firstname = "";
    _lastname = "";
  });
  _formKey.currentState?.reset();
}

// After:
onPressed: () {
  firstname.value = "";
  lastname.value = "";
  _formKey.currentState?.reset();
}
```

Reset continues to clear both the hook state and Form Builder fields.

---

## Step 6: Submit logic stays the same

**Location:** "Submit" button callback

No structural change needed; validation and debug prints still use `_formKey`:

```dart
_formKey.currentState?.validate();
if (_formKey.currentState?.isValid ?? false) {
  debugPrint("Firstname: ${_formKey.currentState?.fields["firstname"]?.value}");
  debugPrint("Lastname: ${_formKey.currentState?.fields["lastname"]?.value}");
}
```

---

## What I like

- Cleaner state management with hooks.
- No need for StatefulWidget boilerplate.
